!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers}var n,r;return n=t,(r=[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.info})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addNewCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"toggleLike",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t,n,o,i,c,a){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_handleLike",(function(e){u._likes=u._handleLikeButton(u._cardId,u._cardElement,u._likes),e.target.classList.toggle("image-card__love-button_active")})),r(this,"_handlePopup",(function(){u._handleCardClick(u._link,u._name)})),r(this,"_handleRemove",(function(){u._handleDeletePopup(u._cardId,u._cardElement)})),this._name=t.name,this._link=t.link,this._likes=t.likes,this._owner=t.owner,this._ownerId=this._owner._id,this._cardId=t._id,this._userId=i,this._cardElement=n.querySelector(".image-card").cloneNode(!0),this._handleDeletePopup=c,this._handleCardClick=o,this._handleLikeButton=a}var t,o;return t=e,(o=[{key:"createCard",value:function(){var e=this._cardElement.querySelector(".image-card__name"),t=this._cardElement.querySelector(".image-card__image"),n=this._cardElement.querySelector(".image-card__love-count");return e.textContent=this._name,t.style.backgroundImage="url(".concat(this._link,")"),n.textContent=this._likes.length,this._setEventListeners(),this._cardElement}},{key:"_setEventListeners",value:function(){var e=this,t=this._cardElement.querySelector(".image-card__love-button"),n=this._cardElement.querySelector(".image-card__image"),r=this._cardElement.querySelector(".image-card__remove-button");this._likes.forEach((function(n){e._userId===n._id&&t.classList.add("image-card__love-button_active")})),t.addEventListener("click",this._handleLike),n.addEventListener("click",this._handlePopup),this._ownerId===this._userId?r.addEventListener("click",this._handleRemove):r.remove()}}])&&n(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._formElement=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),n=this._formElement.querySelector(this._settings.submitButtonSelector);this._toggleButtonState(t,n),t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(r),e._toggleButtonState(t,n)}))}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._settings.inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._settings.inactiveButtonClass),t.disabled=!1)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),n.textContent=t,n.classList.add(this._settings.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_handleButtonClose",(function(){n.close()})),u(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),u(this,"_handleClickClose",(function(e){e.target.classList.contains("popup_visible")&&n.close()})),this._popupSelector=document.querySelector(t),this._closeButton=this._popupSelector.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_visible"),this.setEventListeners()}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_visible"),document.removeEventListener("click",this._handleClickClose),document.removeEventListener("keydown",this._handleEscClose),this._closeButton.addEventListener("click",this._handleButtonClose)}},{key:"setEventListeners",value:function(){document.addEventListener("click",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose),this._closeButton.addEventListener("click",this._handleButtonClose)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&f(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(r){var o=y(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return p(this,e)});function i(e){var t,n,r,c,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=function(e,r){n._popupImage.src=e,n._popupImage.alt=r,n._popupTitle.textContent=r,d((t=h(n),y(i.prototype)),"open",t).call(t)},(c="open")in(r=h(n=o.call(this,e)))?Object.defineProperty(r,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):r.open=a,n._popupImage=n._popupSelector.querySelector(".popup__image"),n._popupTitle=n._popupSelector.querySelector(".popup__card-title"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(l);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function S(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&w(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function c(e,t){var n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a=function(e){e.preventDefault(),n._handleSubmission(n._getInputValues())},(o="_handleSubmissionFunc")in(r=k(n=i.call(this,t)))?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n._handleSubmission=e,n._inputList=n._popupSelector.querySelectorAll(".popup__input"),n._form=n._popupSelector.querySelector(".popup__form"),n}return t=c,(n=[{key:"close",value:function(){g(C(c.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){g(C(c.prototype),"setEventListeners",this).call(this),this._popupSelector.addEventListener("submit",this._handleSubmissionFunc)}},{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){return e[t.name]=t.value})),e}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(l);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function x(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&I(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function c(e,t,n,r){var o,a,u,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),l=function(){o._handleVerification(o._id,o._element)},(u="_handleVerificationFunc")in(a=R(o=i.call(this,t)))?Object.defineProperty(a,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[u]=l,o._saveBtn=o._popupSelector.querySelector(".popup__save-button"),o._handleVerification=e,o._id=n,o._element=r,o}return t=c,(n=[{key:"setEventListeners",value:function(){L(B(c.prototype),"setEventListeners",this).call(this),this._saveBtn.addEventListener("click",this._handleVerificationFunc)}},{key:"setInfo",value:function(e,t){this._id=e,this._element=t}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(l);function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=t,this._userJobElement=n}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,job:this._userJobElement.textContent}}},{key:"setUserInfo",value:function(e,t){this._userNameElement.textContent=e,this._userJobElement.textContent=t}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._containerElement=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderer",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._containerElement.prepend(e)}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N=document.querySelector(".profile__button_type_edit"),J=document.querySelector(".profile__button_type_edit-img"),F=document.querySelector(".profile__button_type_add-image"),H=document.querySelector(".profile__name"),z=document.querySelector(".profile__info"),M=document.querySelector("#profile-image"),Y=".popup_type_edit-profile",G=".popup_type_edit-profile-image",K=".popup_type_add-card",Q=".popup_type_remove-card",W=document.querySelector("#card-template").content,X=document.querySelector(Y).querySelector(".popup__input_type_name"),Z=document.querySelector(Y).querySelector(".popup__input_type_info"),$=document.querySelector(G).querySelector(".popup__input_type_profile-img-link"),ee=new D(H,z),te=new O((function(e){var t=document.querySelector(Y).querySelector(".popup__save-button");t.textContent="Saving...",ue.setUserInfo(e).then((function(e){ee.setUserInfo(e.name,e.about),H.textContent=e.name,z.textContent=e.about})).catch((function(e){console.log(e)})),t.textContent="Save",te.close()}),Y),ne=new O((function(e){var t=document.querySelector(G).querySelector(".popup__save-button");t.textContent="Saving...",ue.setUserAvatar(e).then((function(e){M.src=e.avatar})).catch((function(e){console.log(e)})),t.textContent="Save",ne.close()}),G),re=new O((function(e){var t=document.querySelector(K).querySelector(".popup__save-button");t.textContent="Creating...",ue.addNewCard(e).then((function(e){var t=new o(e,W,ce,se,fe,pe);le.addItem(t.createCard())})).catch((function(e){console.log(e)})),t.textContent="Create",re.close()}),K),oe=new T((function(e,t){var n=document.querySelector(Q).querySelector(".popup__save-button");n.textContent="Deleting...",ue.removeCard(e).then((function(e){t.remove(),t=null})).catch((function(e){console.log(e)})).finally((function(){n.textContent="Yes",oe.close()}))}),Q,"",""),ie=new v(".popup_type_card-view"),ce=ie.open,ae={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};Array.from(document.querySelectorAll(ae.formSelector)).forEach((function(e){new c(ae,e).enableValidation()}));var ue=new t({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9b1558af-91ea-493b-ada9-7496ba6fa8e8","Content-Type":"application/json"}}),le=new A({renderer:function(e){var t=new o(e,W,ce,se,fe,pe);le.addItem(t.createCard())}},".images-container"),se="";function fe(e,t){oe.setInfo(e,t),oe.open()}function pe(e,t,n){var r=n,o=t.querySelector(".image-card__love-button"),i=t.querySelector(".image-card__love-count");return o.classList.contains("image-card__love-button_active")?ue.toggleLike(e,!1).then((function(e){i.textContent=e.likes.length,r=e.likes})).catch((function(e){console.log(e)})):ue.toggleLike(e,!0).then((function(e){i.textContent=e.likes.length,r=e.likes})).catch((function(e){console.log(e)})),r}ue.getUserInfo().then((function(e){ee.setUserInfo(e.name,e.about),H.textContent=e.name,z.textContent=e.about,M.src=e.avatar,M.alt="".concat(e.name,"'s avatar"),se=e._id})).catch((function(e){console.log(e)})),ue.getInitialCards().then((function(e){le.renderer(e),console.log(e)})).catch((function(e){console.log(e)})),re.setEventListeners(),ie.setEventListeners(),N.addEventListener("click",(function(){te.open();var e=ee.getUserInfo();X.value=e.name,Z.value=e.job})),J.addEventListener("click",(function(){var e=M.src;ne.open(),$.value=e})),F.addEventListener("click",(function(){re.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFlMUYsaUJBQWlCLFNBQVMsV0FDdkMwRyxHQUFpQjBCLE9BQ2pCLElBQU1XLEVBQWN0QyxHQUFTb0MsY0FDN0J2QyxFQUFjcEMsTUFBUTZFLEVBQVk3TCxLQUNsQ3FKLEVBQWNyQyxNQUFRNkUsRUFBWWhFLE9BRXBDWSxFQUFrQjNGLGlCQUFpQixTQUFTLFdBQzFDLElBQU1nSixFQUFTakQsRUFBZTFDLElBQzlCK0QsR0FBb0JnQixPQUNwQjVCLEVBQWF0QyxNQUFROEUsS0FFdkJwRCxFQUFjNUYsaUJBQWlCLFNBQVMsV0FDdENzSCxHQUFhYyxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9Qb3B1cFdpdGhWZXJpZmljYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogZGF0YS5pbmZvXHJcbiAgICAgIH0pXHJcbiAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogZGF0YS5saW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB0b2dnbGVMaWtlKGNhcmRJZCwgYWRkTGlrZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBhZGRMaWtlID8gJ1BVVCcgOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSkudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZihyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KVxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCB1c2VySWQsIGhhbmRsZURlbGV0ZVBvcHVwLCBoYW5kbGVMaWtlQnV0dG9uKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lcjtcclxuICAgIHRoaXMuX293bmVySWQgPSB0aGlzLl9vd25lci5faWQ7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1jYXJkJykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlUG9wdXAgPSBoYW5kbGVEZWxldGVQb3B1cDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24gPSBoYW5kbGVMaWtlQnV0dG9uO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2FyZCgpIHtcclxuICAgIGNvbnN0IGNhcmROYW1lID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmltYWdlLWNhcmRfX25hbWUnKTtcclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1jYXJkX19pbWFnZScpO1xyXG4gICAgY29uc3QgY2FyZExpa2VzID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmltYWdlLWNhcmRfX2xvdmUtY291bnQnKTtcclxuICBcclxuICAgIGNhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIGNhcmRJbWFnZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYDtcclxuICAgIGNhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICBcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH0gXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNhcmRMaWtlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmltYWdlLWNhcmRfX2xvdmUtYnV0dG9uJyk7XHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtY2FyZF9faW1hZ2UnKTtcclxuICAgIGNvbnN0IGNhcmRSZW1vdmUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtY2FyZF9fcmVtb3ZlLWJ1dHRvbicpO1xyXG5cclxuICAgIHRoaXMuX2xpa2VzLmZvckVhY2godXNlciA9PiB7XHJcbiAgICAgIGlmKHRoaXMuX3VzZXJJZCA9PT0gdXNlci5faWQpIHtcclxuICAgICAgICBjYXJkTGlrZS5jbGFzc0xpc3QuYWRkKCdpbWFnZS1jYXJkX19sb3ZlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVMaWtlKTtcclxuICAgIFxyXG4gICAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlUG9wdXApO1xyXG4gICAgXHJcbiAgICBpZih0aGlzLl9vd25lcklkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgY2FyZFJlbW92ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVJlbW92ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjYXJkUmVtb3ZlLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZSA9IChldnQpID0+IHtcclxuICAgIHRoaXMuX2xpa2VzID0gdGhpcy5faGFuZGxlTGlrZUJ1dHRvbih0aGlzLl9jYXJkSWQsIHRoaXMuX2NhcmRFbGVtZW50LCB0aGlzLl9saWtlcyk7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2ltYWdlLWNhcmRfX2xvdmUtYnV0dG9uX2FjdGl2ZScpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVBvcHVwID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2xpbmssIHRoaXMuX25hbWUpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVJlbW92ZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZVBvcHVwKHRoaXMuX2NhcmRJZCwgdGhpcy5fY2FyZEVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoY29uZmlnT2JqZWN0LCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBjb25maWdPYmplY3Q7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgIFxyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuICBcclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcbn1cclxuXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX3Zpc2libGUnKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF92aXNpYmxlJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQnV0dG9uQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQnV0dG9uQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUJ1dHRvbkNsb3NlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUNsaWNrQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF92aXNpYmxlXCIpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCkge1xyXG4gICAgc3VwZXIocG9wdXBFbGVtZW50KTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9wb3B1cFRpdGxlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcmQtdGl0bGUnKTtcclxuICB9XHJcblxyXG4gIG9wZW4gPSAoaW1hZ2VTcmMsIGltYWdlQ2FwdGlvbikgPT4ge1xyXG4gICAgXHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGltYWdlU3JjO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBpbWFnZUNhcHRpb247XHJcbiAgICB0aGlzLl9wb3B1cFRpdGxlLnRleHRDb250ZW50ID0gaW1hZ2VDYXB0aW9uO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihoYW5kbGVTdWJtaXNzaW9uLCBwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pc3Npb24gPSBoYW5kbGVTdWJtaXNzaW9uO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX2hhbmRsZVN1Ym1pc3Npb25GdW5jKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVTdWJtaXNzaW9uRnVuYyA9IChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5faGFuZGxlU3VibWlzc2lvbih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZSA9IHt9O1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IGZvcm1WYWx1ZVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuICAgIHJldHVybiBmb3JtVmFsdWU7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhWZXJpZmljYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoaGFuZGxlVmVyaWZpY2F0aW9uLCBwb3B1cFNlbGVjdG9yLCBpZCwgZWxlbWVudCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zYXZlQnRuID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9oYW5kbGVWZXJpZmljYXRpb24gPSBoYW5kbGVWZXJpZmljYXRpb247XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgfVxyXG4gIFxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3NhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVWZXJpZmljYXRpb25GdW5jKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVWZXJpZmljYXRpb25GdW5jID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faGFuZGxlVmVyaWZpY2F0aW9uKHRoaXMuX2lkLCB0aGlzLl9lbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHNldEluZm8oaWQsIGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQgPSB1c2VyTmFtZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5fdXNlckpvYkVsZW1lbnQgPSB1c2VySm9iU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fdXNlckpvYkVsZW1lbnQudGV4dENvbnRlbnRcclxuICAgIH07XHJcbiAgICByZXR1cm4gdXNlckluZm87XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh1c2VyTmFtZSwgdXNlckpvYikge1xyXG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLl91c2VySm9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJKb2I7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe3JlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJlcihpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufSIsIi8vY3NzIGltcG9ydFxyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy9pbXBvcnRzXHJcbmltcG9ydCBBcGkgZnJvbScuLi9zY3JpcHRzL0FwaSc7XHJcbmltcG9ydCBDYXJkIGZyb20gJy4uL3NjcmlwdHMvQ2FyZC5qcyc7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL3NjcmlwdHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9zY3JpcHRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vc2NyaXB0cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aFZlcmlmaWNhdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9Qb3B1cFdpdGhWZXJpZmljYXRpb25cIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL3NjcmlwdHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9zY3JpcHRzL1NlY3Rpb24uanMnO1xyXG5cclxuXHJcbi8vY29uc3RhbnRzXHJcbmNvbnN0IG9wZW5FZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbl90eXBlX2VkaXQnKTtcclxuY29uc3Qgb3BlbkVkaXRJbWdCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uX3R5cGVfZWRpdC1pbWcnKTtcclxuY29uc3Qgb3BlbkFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b25fdHlwZV9hZGQtaW1hZ2UnKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5jb25zdCBwcm9maWxlSW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbmZvJyk7XHJcbmNvbnN0IHByb2ZpbGVQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtaW1hZ2UnKTtcclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZSc7XHJcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGVJbWdTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUtaW1hZ2UnO1xyXG5jb25zdCBwb3B1cEFkZENhcmRTZWxlY3RvciA9ICcucG9wdXBfdHlwZV9hZGQtY2FyZCc7XHJcbmNvbnN0IHBvcHVwSW1hZ2VWaWV3U2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfY2FyZC12aWV3JztcclxuY29uc3QgcG9wdXBEZWxldGVWZXJpZmljYXRpb24gPSAnLnBvcHVwX3R5cGVfcmVtb3ZlLWNhcmQnO1xyXG5jb25zdCBjYXJkc0NvbnRhaW5lclNlbGVjdG9yID0gJy5pbWFnZXMtY29udGFpbmVyJztcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtdGVtcGxhdGUnKS5jb250ZW50O1xyXG5cclxuY29uc3QgaW5wdXRFZGl0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5jb25zdCBpbnB1dEVkaXRJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IpLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9pbmZvJyk7XHJcbmNvbnN0IGlucHV0RWRpdEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBFZGl0UHJvZmlsZUltZ1NlbGVjdG9yKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfcHJvZmlsZS1pbWctbGluaycpO1xyXG5jb25zdCB1c2VyRGF0YSA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUluZm8pO1xyXG5cclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0LCBwb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IpO1xyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlSW1nID0gbmV3IFBvcHVwV2l0aEZvcm0oaGFuZGxlUHJvZmlsZUltZ0Zvcm1TdWJtaXQsIHBvcHVwRWRpdFByb2ZpbGVJbWdTZWxlY3Rvcik7XHJcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKGhhbmRsZUFkZENhcmRGb3JtU3VibWl0LCBwb3B1cEFkZENhcmRTZWxlY3Rvcik7XHJcbmNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhWZXJpZmljYXRpb24oaGFuZGxlRGVsZXRlQ2FyZCwgcG9wdXBEZWxldGVWZXJpZmljYXRpb24sICcnLCAnJyk7XHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBJbWFnZVZpZXdTZWxlY3Rvcik7XHJcbmNvbnN0IG9wZW5JbWFnZSA9IHBvcHVwSW1hZ2Uub3BlbjtcclxuXHJcbi8vZm9ybSB2YWxpZGF0b3IgY29uZmlnXHJcbmNvbnN0IGNvbmZpZ09iamVjdCA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXHJcbn07XHJcbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZ09iamVjdC5mb3JtU2VsZWN0b3IpKTtcclxuXHJcbi8vdmFsaWRhdGUgZm9ybXNcclxuZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICBjb25zdCBmb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnT2JqZWN0LCBmb3JtRWxlbWVudCk7XHJcbiAgZm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiOWIxNTU4YWYtOTFlYS00OTNiLWFkYTktNzQ5NmJhNmZhOGU4XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufSk7IFxyXG5cclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xyXG4gIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgY2FyZFRlbXBsYXRlLCBvcGVuSW1hZ2UsIHVzZXJJZCwgaGFuZGxlRGVsZXRlUG9wdXAsIGhhbmRsZUxpa2VCdG4pO1xyXG4gICAgY2FyZExpc3QuYWRkSXRlbShjYXJkLmNyZWF0ZUNhcmQoKSk7XHJcbiAgfX0sXHJcbiAgY2FyZHNDb250YWluZXJTZWxlY3RvclxyXG4pXHJcblxyXG5sZXQgdXNlcklkID0gJyc7XHJcblxyXG5hcGkuZ2V0VXNlckluZm8oKVxyXG4udGhlbigocmVzdWx0KSA9PiB7XHJcbiAgdXNlckRhdGEuc2V0VXNlckluZm8ocmVzdWx0Lm5hbWUsIHJlc3VsdC5hYm91dCk7XHJcbiAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSByZXN1bHQubmFtZTtcclxuICBwcm9maWxlSW5mby50ZXh0Q29udGVudCA9IHJlc3VsdC5hYm91dDtcclxuICBwcm9maWxlUGljdHVyZS5zcmMgPSByZXN1bHQuYXZhdGFyO1xyXG4gIHByb2ZpbGVQaWN0dXJlLmFsdCA9IGAke3Jlc3VsdC5uYW1lfSdzIGF2YXRhcmA7XHJcbiAgdXNlcklkID0gcmVzdWx0Ll9pZDtcclxufSlcclxuLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGVycm9yKTtcclxufSk7XHJcblxyXG5cclxuYXBpLmdldEluaXRpYWxDYXJkcygpXHJcbi50aGVuKChyZXN1bHQpID0+IHtcclxuICBjYXJkTGlzdC5yZW5kZXJlcihyZXN1bHQpO1xyXG4gIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbn0pXHJcbi5jYXRjaCgoZXJyb3IpID0+IHtcclxuICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbn0pO1xyXG5cclxuXHJcbnBvcHVwQWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5vcGVuRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcclxuICBjb25zdCB1c2VyRWxlbWVudCA9IHVzZXJEYXRhLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXRFZGl0TmFtZS52YWx1ZSA9IHVzZXJFbGVtZW50Lm5hbWU7XHJcbiAgaW5wdXRFZGl0SW5mby52YWx1ZSA9IHVzZXJFbGVtZW50LmpvYjtcclxufSk7XHJcbm9wZW5FZGl0SW1nQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IGltZ1VybCA9IHByb2ZpbGVQaWN0dXJlLnNyYztcclxuICBwb3B1cEVkaXRQcm9maWxlSW1nLm9wZW4oKTtcclxuICBpbnB1dEVkaXRJbWcudmFsdWUgPSBpbWdVcmw7XHJcbn0pO1xyXG5vcGVuQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoc3VibWlzc2lvbkRhdGEpe1xyXG4gIGNvbnN0IHBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yKTtcclxuICBjb25zdCBwb3B1cEJ1dHRvbiA9IHBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XHJcbiAgcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gIGFwaS5zZXRVc2VySW5mbyhzdWJtaXNzaW9uRGF0YSlcclxuICAudGhlbigocmVzdWx0KSA9PiB7IFxyXG4gICAgdXNlckRhdGEuc2V0VXNlckluZm8ocmVzdWx0Lm5hbWUsIHJlc3VsdC5hYm91dCk7XHJcbiAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHJlc3VsdC5uYW1lO1xyXG4gICAgcHJvZmlsZUluZm8udGV4dENvbnRlbnQgPSByZXN1bHQuYWJvdXQ7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgfSk7XHJcbiAgcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVJbWdGb3JtU3VibWl0KHN1Ym1pc3Npb25EYXRhKXtcclxuICBjb25zdCBwb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwRWRpdFByb2ZpbGVJbWdTZWxlY3Rvcik7XHJcbiAgY29uc3QgcG9wdXBCdXR0b24gPSBwb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ1dHRvbicpO1xyXG4gIHBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICBhcGkuc2V0VXNlckF2YXRhcihzdWJtaXNzaW9uRGF0YSlcclxuICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICBwcm9maWxlUGljdHVyZS5zcmMgPSByZXN1bHQuYXZhdGFyO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gIH0pO1xyXG4gIHBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgcG9wdXBFZGl0UHJvZmlsZUltZy5jbG9zZSgpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoY2FyZERhdGEpe1xyXG4gIGNvbnN0IHBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBBZGRDYXJkU2VsZWN0b3IpO1xyXG4gIGNvbnN0IHBvcHVwQnV0dG9uID0gcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcclxuICBwb3B1cEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQ3JlYXRpbmcuLi5cIjtcclxuICBhcGkuYWRkTmV3Q2FyZChjYXJkRGF0YSlcclxuICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQocmVzdWx0LCBjYXJkVGVtcGxhdGUsIG9wZW5JbWFnZSwgdXNlcklkLCBoYW5kbGVEZWxldGVQb3B1cCwgaGFuZGxlTGlrZUJ0bik7XHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQuY3JlYXRlQ2FyZCgpKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICB9KVxyXG4gIHBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhdGVcIjtcclxuICBwb3B1cEFkZENhcmQuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlUG9wdXAoY2FyZElkLCBjYXJkRWxlbWVudCkge1xyXG4gIHBvcHVwRGVsZXRlQ2FyZC5zZXRJbmZvKGNhcmRJZCwgY2FyZEVsZW1lbnQpO1xyXG4gIHBvcHVwRGVsZXRlQ2FyZC5vcGVuKCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRJZCwgY2FyZEVsZW1lbnQpIHtcclxuICBjb25zdCBwb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwRGVsZXRlVmVyaWZpY2F0aW9uKTtcclxuICBjb25zdCBwb3B1cEJ1dHRvbiA9IHBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XHJcbiAgcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XHJcbiAgYXBpLnJlbW92ZUNhcmQoY2FyZElkKVxyXG4gIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgcG9wdXBCdXR0b24udGV4dENvbnRlbnQgPSBcIlllc1wiO1xyXG4gICAgcG9wdXBEZWxldGVDYXJkLmNsb3NlKCk7XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTGlrZUJ0bihjYXJkSWQsIGNhcmRFbGVtZW50LCBsaWtlcykge1xyXG4gIGxldCBsaWtlc0FyciA9IGxpa2VzO1xyXG4gIGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtY2FyZF9fbG92ZS1idXR0b24nKTtcclxuICBjb25zdCBsaWtlQ291bnRlciA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1jYXJkX19sb3ZlLWNvdW50Jyk7XHJcbiAgaWYobGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2ltYWdlLWNhcmRfX2xvdmUtYnV0dG9uX2FjdGl2ZScpKSB7XHJcbiAgICBhcGkudG9nZ2xlTGlrZShjYXJkSWQsIGZhbHNlKVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHJlc3VsdC5saWtlcy5sZW5ndGg7XHJcbiAgICAgIGxpa2VzQXJyID0gcmVzdWx0Lmxpa2VzO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFwaS50b2dnbGVMaWtlKGNhcmRJZCwgdHJ1ZSlcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSByZXN1bHQubGlrZXMubGVuZ3RoO1xyXG4gICAgICBsaWtlc0FyciA9IHJlc3VsdC5saWtlcztcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gbGlrZXNBcnI7XHJcbn1cclxuIl0sIm5hbWVzIjpbIkFwaSIsIm9wdGlvbnMiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJhYm91dCIsImluZm8iLCJhdmF0YXIiLCJsaW5rIiwiY2FyZElkIiwiYWRkTGlrZSIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ1c2VySWQiLCJoYW5kbGVEZWxldGVQb3B1cCIsImhhbmRsZUxpa2VCdXR0b24iLCJldnQiLCJfbGlrZXMiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9jYXJkSWQiLCJfY2FyZEVsZW1lbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2xpbmsiLCJfbmFtZSIsIl9oYW5kbGVEZWxldGVQb3B1cCIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJfb3duZXJJZCIsIl9pZCIsIl91c2VySWQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvbmVOb2RlIiwiY2FyZE5hbWUiLCJjYXJkSW1hZ2UiLCJjYXJkTGlrZXMiLCJ0ZXh0Q29udGVudCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwibGVuZ3RoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZExpa2UiLCJjYXJkUmVtb3ZlIiwiZm9yRWFjaCIsInVzZXIiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2UiLCJfaGFuZGxlUG9wdXAiLCJfaGFuZGxlUmVtb3ZlIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZ09iamVjdCIsImZvcm1FbGVtZW50IiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwicHJldmVudERlZmF1bHQiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImJ1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNsb3NlIiwia2V5IiwiY29udGFpbnMiLCJfcG9wdXBTZWxlY3RvciIsImRvY3VtZW50IiwiX2Nsb3NlQnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlQnV0dG9uQ2xvc2UiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwRWxlbWVudCIsImltYWdlU3JjIiwiaW1hZ2VDYXB0aW9uIiwiX3BvcHVwSW1hZ2UiLCJzcmMiLCJhbHQiLCJfcG9wdXBUaXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXNzaW9uIiwiX2hhbmRsZVN1Ym1pc3Npb24iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRMaXN0IiwiX2Zvcm0iLCJyZXNldCIsIl9oYW5kbGVTdWJtaXNzaW9uRnVuYyIsImZvcm1WYWx1ZSIsImlucHV0IiwidmFsdWUiLCJQb3B1cFdpdGhWZXJpZmljYXRpb24iLCJoYW5kbGVWZXJpZmljYXRpb24iLCJlbGVtZW50IiwiX2hhbmRsZVZlcmlmaWNhdGlvbiIsIl9lbGVtZW50IiwiX3NhdmVCdG4iLCJfaGFuZGxlVmVyaWZpY2F0aW9uRnVuYyIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckpvYkVsZW1lbnQiLCJqb2IiLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXJFbGVtZW50IiwiaXRlbXMiLCJpdGVtIiwicHJlcGVuZCIsIm9wZW5FZGl0QnV0dG9uIiwib3BlbkVkaXRJbWdCdXR0b24iLCJvcGVuQWRkQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSW5mbyIsInByb2ZpbGVQaWN0dXJlIiwicG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yIiwicG9wdXBFZGl0UHJvZmlsZUltZ1NlbGVjdG9yIiwicG9wdXBBZGRDYXJkU2VsZWN0b3IiLCJwb3B1cERlbGV0ZVZlcmlmaWNhdGlvbiIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJpbnB1dEVkaXROYW1lIiwiaW5wdXRFZGl0SW5mbyIsImlucHV0RWRpdEltZyIsInVzZXJEYXRhIiwicG9wdXBFZGl0UHJvZmlsZSIsInN1Ym1pc3Npb25EYXRhIiwicG9wdXBCdXR0b24iLCJhcGkiLCJzZXRVc2VySW5mbyIsInJlc3VsdCIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwicG9wdXBFZGl0UHJvZmlsZUltZyIsInNldFVzZXJBdmF0YXIiLCJwb3B1cEFkZENhcmQiLCJjYXJkRGF0YSIsImFkZE5ld0NhcmQiLCJjYXJkIiwib3BlbkltYWdlIiwiaGFuZGxlTGlrZUJ0biIsImNhcmRMaXN0IiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJwb3B1cERlbGV0ZUNhcmQiLCJjYXJkRWxlbWVudCIsInJlbW92ZUNhcmQiLCJmaW5hbGx5IiwicG9wdXBJbWFnZSIsIm9wZW4iLCJmb3JtU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiYXV0aG9yaXphdGlvbiIsInNldEluZm8iLCJsaWtlc0FyciIsImxpa2VCdXR0b24iLCJsaWtlQ291bnRlciIsInRvZ2dsZUxpa2UiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInVzZXJFbGVtZW50IiwiaW1nVXJsIl0sInNvdXJjZVJvb3QiOiIifQ==